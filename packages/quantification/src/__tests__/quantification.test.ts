import {
  getQuantificationSummary,
  getUnadjustedGrandfatheredTonnesPerYear,
  getAdjustedGrandfatheredTonnesPerYear,
  METHODOLOGY_VERSION,
} from '../index';

import {
  GRANDFATHERABLE_YEARS_OUTPUT,
  NO_GRANDFATHERABLE_YEARS_OUTPUT,
  COMPLEX_OUTPUT,
  MULTIPOLYGON_OUTPUT,
} from './example-output';

describe('getUnadjustedGrandfatheredTonnesPerYear', () => {
  describe('When all annuals are net positive', () => {
    it('should take the lesser of either the somsc annual difference or the ten year projection average per year', () => {
      expect(
        getUnadjustedGrandfatheredTonnesPerYear({
          somscAnnualDifferencesBetweenFutureAndBaselineScenarios: {
            '2015': 17.54,
            '2016': 12.34,
            '2017': 30.43,
            '2018': 30.14,
            '2019': 34.95,
          },
          tenYearProjectedTonnesPerYear: 25.6,
          totalAcres: 16.87,
        })
      ).toStrictEqual<
        ReturnType<typeof getUnadjustedGrandfatheredTonnesPerYear>
      >({
        unadjustedGrandfatheredTonnesPerYear: {
          '2015': {
            amount: 17.54,
            method: 'somsc',
            averagePerAcre: 1.039715471250741,
            totalAcres: 16.87,
          },
          '2016': {
            amount: 12.34,
            method: 'somsc',
            averagePerAcre: 0.7314759928867812,
            totalAcres: 16.87,
          },
          '2017': {
            amount: 25.6,
            method: 'projection',
            averagePerAcre: 1.5174866627148784,
            totalAcres: 16.87,
          },
          '2018': {
            amount: 25.6,
            method: 'projection',
            averagePerAcre: 1.5174866627148784,
            totalAcres: 16.87,
          },
          '2019': {
            amount: 25.6,
            method: 'projection',
            averagePerAcre: 1.5174866627148784,
            totalAcres: 16.87,
          },
        },
      });
    });
  });
  describe('When the ten year projection is net negative', () => {
    // todo
    it.todo('should create the correct quantification numbers');
  });
  describe('When some annuals are net negative', () => {
    it('should take the lesser of either the somsc annual difference or the ten year projection average per year', () => {
      expect(
        getUnadjustedGrandfatheredTonnesPerYear({
          somscAnnualDifferencesBetweenFutureAndBaselineScenarios: {
            '2015': -181.33,
            '2016': 444.75,
            '2017': 251.8,
            '2018': 444.75,
            '2019': 444.75,
          },
          tenYearProjectedTonnesPerYear: 444.75,
          totalAcres: 234.81,
        })
      ).toStrictEqual<
        ReturnType<typeof getUnadjustedGrandfatheredTonnesPerYear>
      >({
        unadjustedGrandfatheredTonnesPerYear: {
          '2015': {
            amount: -181.33,
            method: 'somsc',
            averagePerAcre: -0.7722413866530387,
            totalAcres: 234.81,
          },
          '2016': {
            amount: 444.75,
            method: 'somsc',
            averagePerAcre: 1.8940845790213363,
            totalAcres: 234.81,
          },
          '2017': {
            amount: 251.8,
            method: 'somsc',
            averagePerAcre: 1.072356373237937,
            totalAcres: 234.81,
          },
          '2018': {
            amount: 444.75,
            method: 'somsc',
            averagePerAcre: 1.8940845790213363,
            totalAcres: 234.81,
          },
          '2019': {
            amount: 444.75,
            method: 'somsc',
            averagePerAcre: 1.8940845790213363,
            totalAcres: 234.81,
          },
        },
      });
    });
  });
});

describe('getAdjustedGrandfatheredTonnesPerYear', () => {
  describe('When all annuals are net positive', () => {
    it('should take the lesser of either the somsc annual difference or the ten year projection average per year', () => {
      expect(
        getAdjustedGrandfatheredTonnesPerYear({
          unadjustedGrandfatheredTonnesPerYearForProject: [
            {
              '2015': {
                totalAcres: 16.87,
                amount: 17.54,
                method: 'somsc',
                averagePerAcre: 1.039715471250741,
              },
              '2016': {
                totalAcres: 16.87,
                amount: 12.34,
                method: 'somsc',
                averagePerAcre: 0.7314759928867812,
              },
              '2017': {
                totalAcres: 16.87,
                amount: 25.6,
                method: 'projection',
                averagePerAcre: 1.5174866627148784,
              },
              '2018': {
                totalAcres: 16.87,
                amount: 25.6,
                method: 'projection',
                averagePerAcre: 1.5174866627148784,
              },
              '2019': {
                totalAcres: 16.87,
                amount: 25.6,
                method: 'projection',
                averagePerAcre: 1.5174866627148784,
              },
            },
          ],
        })
      ).toStrictEqual<ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>>(
        {
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                adjustment: 0,
                totalAcres: 16.87,
                unadjusted: 17.54,
                adjusted: 17.54,
                method: 'somsc',
                averagePerAcre: 1.039715471250741,
              },
              '2016': {
                adjustment: 0,
                totalAcres: 16.87,
                unadjusted: 12.34,
                adjusted: 12.34,
                method: 'somsc',
                averagePerAcre: 0.7314759928867812,
              },
              '2017': {
                adjustment: 0,
                totalAcres: 16.87,
                unadjusted: 25.6,
                adjusted: 25.6,
                method: 'projection',
                averagePerAcre: 1.5174866627148784,
              },
              '2018': {
                adjustment: 0,
                totalAcres: 16.87,
                unadjusted: 25.6,
                adjusted: 25.6,
                method: 'projection',
                averagePerAcre: 1.5174866627148784,
              },
              '2019': {
                adjustment: 0,
                totalAcres: 16.87,
                unadjusted: 25.6,
                adjusted: 25.6,
                method: 'projection',
                averagePerAcre: 1.5174866627148784,
              },
            },
          ],
        }
      );
    });
  });
  describe('When the ten year projection is net negative', () => {
    // todo
    it.todo('should create the correct quantification numbers');
  });
  describe('When some annuals are net negative', () => {
    describe('When the negative annuals in a past year totaled up require the negative amount to span across multiple years', () => {
      it('should adjust multiple successive vintage years', () => {
        expect(
          getAdjustedGrandfatheredTonnesPerYear({
            unadjustedGrandfatheredTonnesPerYearForProject: [
              {
                '2015': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2016': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2017': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2018': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2019': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
              },
              {
                '2015': {
                  amount: 10,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2016': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2017': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2018': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2019': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
              },
              {
                '2015': {
                  amount: -570,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2016': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2017': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2018': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
                '2019': {
                  amount: 50,
                  method: null,
                  averagePerAcre: null,
                  totalAcres: 119.00674210689633,
                },
              },
            ],
          })
        ).toStrictEqual<
          ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>
        >({
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2016': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2017': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2018': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2019': {
                unadjusted: 50,
                adjustment: -20,
                adjusted: 30,
                averagePerAcre: 0.25208655802923224,
                method: null,
                totalAcres: 119.00674210689633,
              },
            },
            {
              '2015': {
                unadjusted: 10,
                adjustment: -10,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2016': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2017': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2018': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2019': {
                unadjusted: 50,
                adjustment: -20,
                adjusted: 30,
                averagePerAcre: 0.25208655802923224,
                method: null,
                totalAcres: 119.00674210689633,
              },
            },
            {
              '2015': {
                unadjusted: -570,
                adjustment: 570,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2016': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2017': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2018': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: 119.00674210689633,
              },
              '2019': {
                unadjusted: 50,
                adjustment: -20,
                adjusted: 30,
                averagePerAcre: 0.25208655802923224,
                method: null,
                totalAcres: 119.00674210689633,
              },
            },
          ],
        });
      });
    });

    it('should take the lesser of either the somsc annual difference or the ten year projection average per year', () => {
      expect(
        getAdjustedGrandfatheredTonnesPerYear({
          unadjustedGrandfatheredTonnesPerYearForProject: [
            {
              '2015': {
                amount: 154.77,
                method: null,
                averagePerAcre: null,
                totalAcres: 125.321625,
              },
              '2016': {
                amount: 154.77,
                method: null,
                averagePerAcre: null,
                totalAcres: 125.321625,
              },
              '2017': {
                amount: 154.77,
                method: null,
                averagePerAcre: null,
                totalAcres: 125.321625,
              },
              '2018': {
                amount: 154.77,
                method: null,
                averagePerAcre: null,
                totalAcres: 125.321625,
              },
              '2019': {
                amount: 154.77,
                method: null,
                averagePerAcre: null,
                totalAcres: 125.321625,
              },
            },
            {
              '2015': {
                amount: 213.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 208.6568353,
              },
              '2016': {
                amount: 180.22,
                method: null,
                averagePerAcre: null,
                totalAcres: 208.6568353,
              },
              '2017': {
                amount: 213.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 208.6568353,
              },
              '2018': {
                amount: 213.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 208.6568353,
              },
              '2019': {
                amount: 213.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 208.6568353,
              },
            },
            {
              '2015': {
                amount: 46.03,
                method: null,
                averagePerAcre: null,
                totalAcres: 56.60445956,
              },
              '2016': {
                amount: 45.4,
                method: null,
                averagePerAcre: null,
                totalAcres: 56.60445956,
              },
              '2017': {
                amount: 17.93,
                method: null,
                averagePerAcre: null,
                totalAcres: 56.60445956,
              },
              '2018': {
                amount: 55.09,
                method: null,
                averagePerAcre: null,
                totalAcres: 56.60445956,
              },
              '2019': {
                amount: 55.09,
                method: null,
                averagePerAcre: null,
                totalAcres: 56.60445956,
              },
            },
            {
              '2015': {
                amount: 145.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 115.4574361,
              },
              '2016': {
                amount: 145.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 115.4574361,
              },
              '2017': {
                amount: 145.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 115.4574361,
              },
              '2018': {
                amount: 145.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 115.4574361,
              },
              '2019': {
                amount: 145.06,
                method: null,
                averagePerAcre: null,
                totalAcres: 115.4574361,
              },
            },
            {
              '2015': {
                amount: 66.91,
                method: null,
                averagePerAcre: null,
                totalAcres: 328.6262857,
              },
              '2016': {
                amount: -91.07,
                method: null,
                averagePerAcre: null,
                totalAcres: 328.6262857,
              },
              '2017': {
                amount: 347.93,
                method: null,
                averagePerAcre: null,
                totalAcres: 328.6262857,
              },
              '2018': {
                amount: 347.93,
                method: null,
                averagePerAcre: null,
                totalAcres: 328.6262857,
              },
              '2019': {
                amount: 347.93,
                method: null,
                averagePerAcre: null,
                totalAcres: 328.6262857,
              },
            },
            {
              '2016': {
                amount: 109.27,
                method: null,
                averagePerAcre: null,
                totalAcres: 118.5723544,
              },
              '2017': {
                amount: 109.27,
                method: null,
                averagePerAcre: null,
                totalAcres: 118.5723544,
              },
              '2018': {
                amount: 82.27,
                method: null,
                averagePerAcre: null,
                totalAcres: 118.5723544,
              },
              '2019': {
                amount: 109.27,
                method: null,
                averagePerAcre: null,
                totalAcres: 118.5723544,
              },
            },
            {
              '2015': {
                amount: 18.76,
                method: null,
                averagePerAcre: null,
                totalAcres: 25.76358104,
              },
              '2016': {
                amount: 27.12,
                method: null,
                averagePerAcre: null,
                totalAcres: 25.76358104,
              },
              '2017': {
                amount: 19.66,
                method: null,
                averagePerAcre: null,
                totalAcres: 25.76358104,
              },
              '2018': {
                amount: 26.58,
                method: null,
                averagePerAcre: null,
                totalAcres: 25.76358104,
              },
              '2019': {
                amount: 27.12,
                method: null,
                averagePerAcre: null,
                totalAcres: 25.76358104,
              },
            },
            {
              '2015': {
                amount: 169.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 173.5382959,
              },
              '2016': {
                amount: 169.87,
                method: null,
                averagePerAcre: null,
                totalAcres: 173.5382959,
              },
              '2017': {
                amount: 125.74,
                method: null,
                averagePerAcre: null,
                totalAcres: 173.5382959,
              },
              '2018': {
                amount: 166.48,
                method: null,
                averagePerAcre: null,
                totalAcres: 173.5382959,
              },
              '2019': {
                amount: 169.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 173.5382959,
              },
            },
            {
              '2016': {
                amount: 20.81,
                method: null,
                averagePerAcre: null,
                totalAcres: 132.8031858,
              },
              '2017': {
                amount: 67.13,
                method: null,
                averagePerAcre: null,
                totalAcres: 132.8031858,
              },
              '2018': {
                amount: 67.13,
                method: null,
                averagePerAcre: null,
                totalAcres: 132.8031858,
              },
              '2019': {
                amount: 67.13,
                method: null,
                averagePerAcre: null,
                totalAcres: 132.8031858,
              },
            },
            {
              '2015': {
                amount: 345.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 281.4691098,
              },
              '2016': {
                amount: 337.4,
                method: null,
                averagePerAcre: null,
                totalAcres: 281.4691098,
              },
              '2017': {
                amount: 345.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 281.4691098,
              },
              '2018': {
                amount: 345.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 281.4691098,
              },
              '2019': {
                amount: 345.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 281.4691098,
              },
            },
            {
              '2016': {
                amount: 41.89,
                method: null,
                averagePerAcre: null,
                totalAcres: 45.27622171,
              },
              '2017': {
                amount: 42.97,
                method: null,
                averagePerAcre: null,
                totalAcres: 45.27622171,
              },
              '2018': {
                amount: 42.43,
                method: null,
                averagePerAcre: null,
                totalAcres: 45.27622171,
              },
              '2019': {
                amount: 42.97,
                method: null,
                averagePerAcre: null,
                totalAcres: 45.27622171,
              },
            },
            {
              '2015': {
                amount: 19.62,
                method: null,
                averagePerAcre: null,
                totalAcres: 23.97870944,
              },
              '2016': {
                amount: 19.56,
                method: null,
                averagePerAcre: null,
                totalAcres: 23.97870944,
              },
              '2017': {
                amount: 7.7,
                method: null,
                averagePerAcre: null,
                totalAcres: 23.97870944,
              },
              '2018': {
                amount: 25.75,
                method: null,
                averagePerAcre: null,
                totalAcres: 23.97870944,
              },
              '2019': {
                amount: 25.75,
                method: null,
                averagePerAcre: null,
                totalAcres: 23.97870944,
              },
            },
            {
              '2015': {
                amount: 204.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 176.0693818,
              },
              '2016': {
                amount: 176.95,
                method: null,
                averagePerAcre: null,
                totalAcres: 176.0693818,
              },
              '2017': {
                amount: 204.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 176.0693818,
              },
              '2018': {
                amount: 204.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 176.0693818,
              },
              '2019': {
                amount: 204.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 176.0693818,
              },
            },
            {
              '2016': {
                amount: 15.77,
                method: null,
                averagePerAcre: null,
                totalAcres: 72.42407128,
              },
              '2017': {
                amount: 28.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 72.42407128,
              },
              '2018': {
                amount: 28.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 72.42407128,
              },
              '2019': {
                amount: 28.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 72.42407128,
              },
            },
            {
              '2015': {
                amount: 96.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 134.6658747,
              },
              '2016': {
                amount: 55.42,
                method: null,
                averagePerAcre: null,
                totalAcres: 134.6658747,
              },
              '2017': {
                amount: 96.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 134.6658747,
              },
              '2018': {
                amount: 31.34,
                method: null,
                averagePerAcre: null,
                totalAcres: 134.6658747,
              },
              '2019': {
                amount: 96.32,
                method: null,
                averagePerAcre: null,
                totalAcres: 134.6658747,
              },
            },
            {
              '2015': {
                amount: 144.6,
                method: null,
                averagePerAcre: null,
                totalAcres: 137.655968,
              },
              '2016': {
                amount: 201.3,
                method: null,
                averagePerAcre: null,
                totalAcres: 137.655968,
              },
              '2017': {
                amount: 202.05,
                method: null,
                averagePerAcre: null,
                totalAcres: 137.655968,
              },
              '2018': {
                amount: 202.05,
                method: null,
                averagePerAcre: null,
                totalAcres: 137.655968,
              },
              '2019': {
                amount: 202.05,
                method: null,
                averagePerAcre: null,
                totalAcres: 137.655968,
              },
            },
            {
              '2015': {
                amount: 28.75,
                method: null,
                averagePerAcre: null,
                totalAcres: 84.77541193,
              },
              '2016': {
                amount: 5.3,
                method: null,
                averagePerAcre: null,
                totalAcres: 84.77541193,
              },
              '2017': {
                amount: 75.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 84.77541193,
              },
              '2018': {
                amount: 75.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 84.77541193,
              },
              '2019': {
                amount: 75.96,
                method: null,
                averagePerAcre: null,
                totalAcres: 84.77541193,
              },
            },
            {
              '2015': {
                amount: 80.3,
                method: null,
                averagePerAcre: null,
                totalAcres: 75.99211011,
              },
              '2016': {
                amount: 74.16,
                method: null,
                averagePerAcre: null,
                totalAcres: 75.99211011,
              },
              '2017': {
                amount: 80.3,
                method: null,
                averagePerAcre: null,
                totalAcres: 75.99211011,
              },
              '2018': {
                amount: 80.3,
                method: null,
                averagePerAcre: null,
                totalAcres: 75.99211011,
              },
              '2019': {
                amount: 72.04,
                method: null,
                averagePerAcre: null,
                totalAcres: 75.99211011,
              },
            },
            {
              '2015': {
                amount: 17.64,
                method: null,
                averagePerAcre: null,
                totalAcres: 17.26689633,
              },
              '2016': {
                amount: 20.4,
                method: null,
                averagePerAcre: null,
                totalAcres: 17.26689633,
              },
              '2017': {
                amount: 20.4,
                method: null,
                averagePerAcre: null,
                totalAcres: 17.26689633,
              },
              '2018': {
                amount: 20.4,
                method: null,
                averagePerAcre: null,
                totalAcres: 17.26689633,
              },
              '2019': {
                amount: 4.34,
                method: null,
                averagePerAcre: null,
                totalAcres: 17.26689633,
              },
            },
            {
              '2016': {
                amount: 8.95,
                method: null,
                averagePerAcre: null,
                totalAcres: 64.6119642,
              },
              '2017': {
                amount: 26.67,
                method: null,
                averagePerAcre: null,
                totalAcres: 64.6119642,
              },
              '2018': {
                amount: 26.67,
                method: null,
                averagePerAcre: null,
                totalAcres: 64.6119642,
              },
              '2019': {
                amount: 26.67,
                method: null,
                averagePerAcre: null,
                totalAcres: 64.6119642,
              },
            },
            {
              '2016': {
                amount: 51.31,
                method: null,
                averagePerAcre: null,
                totalAcres: 70.81278014,
              },
              '2017': {
                amount: 63.43,
                method: null,
                averagePerAcre: null,
                totalAcres: 70.81278014,
              },
              '2018': {
                amount: 41.83,
                method: null,
                averagePerAcre: null,
                totalAcres: 70.81278014,
              },
              '2019': {
                amount: 63.43,
                method: null,
                averagePerAcre: null,
                totalAcres: 70.81278014,
              },
            },
            {
              '2015': {
                amount: 346.54,
                method: null,
                averagePerAcre: null,
                totalAcres: 311.2786352,
              },
              '2016': {
                amount: 346.54,
                method: null,
                averagePerAcre: null,
                totalAcres: 311.2786352,
              },
              '2017': {
                amount: 346.54,
                method: null,
                averagePerAcre: null,
                totalAcres: 311.2786352,
              },
              '2018': {
                amount: 346.54,
                method: null,
                averagePerAcre: null,
                totalAcres: 311.2786352,
              },
              '2019': {
                amount: 346.54,
                method: null,
                averagePerAcre: null,
                totalAcres: 311.2786352,
              },
            },
            {
              '2015': {
                amount: 45.09,
                method: null,
                averagePerAcre: null,
                totalAcres: 53.98577334,
              },
              '2016': {
                amount: 34.64,
                method: null,
                averagePerAcre: null,
                totalAcres: 53.98577334,
              },
              '2017': {
                amount: 29.21,
                method: null,
                averagePerAcre: null,
                totalAcres: 53.98577334,
              },
              '2018': {
                amount: 45.09,
                method: null,
                averagePerAcre: null,
                totalAcres: 53.98577334,
              },
              '2019': {
                amount: 20.79,
                method: null,
                averagePerAcre: null,
                totalAcres: 53.98577334,
              },
            },
            {
              '2017': {
                amount: 22.33,
                method: null,
                averagePerAcre: null,
                totalAcres: 45.51041284,
              },
              '2018': {
                amount: 39.26,
                method: null,
                averagePerAcre: null,
                totalAcres: 45.51041284,
              },
              '2019': {
                amount: 41.95,
                method: null,
                averagePerAcre: null,
                totalAcres: 45.51041284,
              },
            },
          ],
        })
      ).toStrictEqual<ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>>(
        {
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                adjusted: 154.77,
                adjustment: 0,
                averagePerAcre: 1.234982390309733,
                method: null,
                totalAcres: 125.321625,
                unadjusted: 154.77,
              },
              '2016': {
                adjusted: 150.63045454545454,
                adjustment: -4.139545454545455,
                averagePerAcre: 1.201951016398443,
                method: null,
                totalAcres: 125.321625,
                unadjusted: 154.77,
              },
              '2017': {
                adjusted: 154.77,
                adjustment: 0,
                averagePerAcre: 1.234982390309733,
                method: null,
                totalAcres: 125.321625,
                unadjusted: 154.77,
              },
              '2018': {
                adjusted: 154.77,
                adjustment: 0,
                averagePerAcre: 1.234982390309733,
                method: null,
                totalAcres: 125.321625,
                unadjusted: 154.77,
              },
              '2019': {
                adjusted: 154.77,
                adjustment: 0,
                averagePerAcre: 1.234982390309733,
                method: null,
                totalAcres: 125.321625,
                unadjusted: 154.77,
              },
            },
            {
              '2015': {
                adjusted: 213.06,
                adjustment: 0,
                averagePerAcre: 1.0211024225191054,
                method: null,
                totalAcres: 208.6568353,
                unadjusted: 213.06,
              },
              '2016': {
                adjusted: 176.08045454545456,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.8438758035043128,
                method: null,
                totalAcres: 208.6568353,
                unadjusted: 180.22,
              },
              '2017': {
                adjusted: 213.06,
                adjustment: 0,
                averagePerAcre: 1.0211024225191054,
                method: null,
                totalAcres: 208.6568353,
                unadjusted: 213.06,
              },
              '2018': {
                adjusted: 213.06,
                adjustment: 0,
                averagePerAcre: 1.0211024225191054,
                method: null,
                totalAcres: 208.6568353,
                unadjusted: 213.06,
              },
              '2019': {
                adjusted: 213.06,
                adjustment: 0,
                averagePerAcre: 1.0211024225191054,
                method: null,
                totalAcres: 208.6568353,
                unadjusted: 213.06,
              },
            },
            {
              '2015': {
                adjusted: 46.03,
                adjustment: 0,
                averagePerAcre: 0.8131868117424351,
                method: null,
                totalAcres: 56.60445956,
                unadjusted: 46.03,
              },
              '2016': {
                adjusted: 41.26045454545454,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.7289258631949129,
                method: null,
                totalAcres: 56.60445956,
                unadjusted: 45.4,
              },
              '2017': {
                adjusted: 17.93,
                adjustment: 0,
                averagePerAcre: 0.3167594945588065,
                method: null,
                totalAcres: 56.60445956,
                unadjusted: 17.93,
              },
              '2018': {
                adjusted: 55.09,
                adjustment: 0,
                averagePerAcre: 0.9732448720158755,
                method: null,
                totalAcres: 56.60445956,
                unadjusted: 55.09,
              },
              '2019': {
                adjusted: 55.09,
                adjustment: 0,
                averagePerAcre: 0.9732448720158755,
                method: null,
                totalAcres: 56.60445956,
                unadjusted: 55.09,
              },
            },
            {
              '2015': {
                adjusted: 145.06,
                adjustment: 0,
                averagePerAcre: 1.2563937404114935,
                method: null,
                totalAcres: 115.4574361,
                unadjusted: 145.06,
              },
              '2016': {
                adjusted: 140.92045454545453,
                adjustment: -4.139545454545455,
                averagePerAcre: 1.2205403073683405,
                method: null,
                totalAcres: 115.4574361,
                unadjusted: 145.06,
              },
              '2017': {
                adjusted: 145.06,
                adjustment: 0,
                averagePerAcre: 1.2563937404114935,
                method: null,
                totalAcres: 115.4574361,
                unadjusted: 145.06,
              },
              '2018': {
                adjusted: 145.06,
                adjustment: 0,
                averagePerAcre: 1.2563937404114935,
                method: null,
                totalAcres: 115.4574361,
                unadjusted: 145.06,
              },
              '2019': {
                adjusted: 145.06,
                adjustment: 0,
                averagePerAcre: 1.2563937404114935,
                method: null,
                totalAcres: 115.4574361,
                unadjusted: 145.06,
              },
            },
            {
              '2015': {
                adjusted: 66.91,
                adjustment: 0,
                averagePerAcre: 0.20360513723811352,
                method: null,
                totalAcres: 328.6262857,
                unadjusted: 66.91,
              },
              '2016': {
                adjusted: 0,
                adjustment: 91.07,
                averagePerAcre: 0,
                method: null,
                totalAcres: 328.6262857,
                unadjusted: -91.07,
              },
              '2017': {
                adjusted: 347.93,
                adjustment: 0,
                averagePerAcre: 1.0587406276977558,
                method: null,
                totalAcres: 328.6262857,
                unadjusted: 347.93,
              },
              '2018': {
                adjusted: 347.93,
                adjustment: 0,
                averagePerAcre: 1.0587406276977558,
                method: null,
                totalAcres: 328.6262857,
                unadjusted: 347.93,
              },
              '2019': {
                adjusted: 347.93,
                adjustment: 0,
                averagePerAcre: 1.0587406276977558,
                method: null,
                totalAcres: 328.6262857,
                unadjusted: 347.93,
              },
            },
            {
              '2016': {
                adjusted: 105.13045454545454,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.886635464712123,
                method: null,
                totalAcres: 118.5723544,
                unadjusted: 109.27,
              },
              '2017': {
                adjusted: 109.27,
                adjustment: 0,
                averagePerAcre: 0.9215470212506803,
                method: null,
                totalAcres: 118.5723544,
                unadjusted: 109.27,
              },
              '2018': {
                adjusted: 82.27,
                adjustment: 0,
                averagePerAcre: 0.6938379558734645,
                method: null,
                totalAcres: 118.5723544,
                unadjusted: 82.27,
              },
              '2019': {
                adjusted: 109.27,
                adjustment: 0,
                averagePerAcre: 0.9215470212506803,
                method: null,
                totalAcres: 118.5723544,
                unadjusted: 109.27,
              },
            },
            {
              '2015': {
                adjusted: 18.76,
                adjustment: 0,
                averagePerAcre: 0.7281596440678652,
                method: null,
                totalAcres: 25.76358104,
                unadjusted: 18.76,
              },
              '2016': {
                adjusted: 22.980454545454545,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.8919743924486107,
                method: null,
                totalAcres: 25.76358104,
                unadjusted: 27.12,
              },
              '2017': {
                adjusted: 19.66,
                adjustment: 0,
                averagePerAcre: 0.7630926760327414,
                method: null,
                totalAcres: 25.76358104,
                unadjusted: 19.66,
              },
              '2018': {
                adjusted: 26.58,
                adjustment: 0,
                averagePerAcre: 1.031688877362679,
                method: null,
                totalAcres: 25.76358104,
                unadjusted: 26.58,
              },
              '2019': {
                adjusted: 27.12,
                adjustment: 0,
                averagePerAcre: 1.0526486965416046,
                method: null,
                totalAcres: 25.76358104,
                unadjusted: 27.12,
              },
            },
            {
              '2015': {
                adjusted: 169.96,
                adjustment: 0,
                averagePerAcre: 0.9793803674200998,
                method: null,
                totalAcres: 173.5382959,
                unadjusted: 169.96,
              },
              '2016': {
                adjusted: 165.73045454545453,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.9550079634350871,
                method: null,
                totalAcres: 173.5382959,
                unadjusted: 169.87,
              },
              '2017': {
                adjusted: 125.74,
                adjustment: 0,
                averagePerAcre: 0.7245662944187065,
                method: null,
                totalAcres: 173.5382959,
                unadjusted: 125.74,
              },
              '2018': {
                adjusted: 166.48,
                adjustment: 0,
                averagePerAcre: 0.9593271567904108,
                method: null,
                totalAcres: 173.5382959,
                unadjusted: 166.48,
              },
              '2019': {
                adjusted: 169.96,
                adjustment: 0,
                averagePerAcre: 0.9793803674200998,
                method: null,
                totalAcres: 173.5382959,
                unadjusted: 169.96,
              },
            },
            {
              '2016': {
                adjusted: 16.670454545454547,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.1255275198786274,
                method: null,
                totalAcres: 132.8031858,
                unadjusted: 20.81,
              },
              '2017': {
                adjusted: 67.13,
                adjustment: 0,
                averagePerAcre: 0.5054848616440345,
                method: null,
                totalAcres: 132.8031858,
                unadjusted: 67.13,
              },
              '2018': {
                adjusted: 67.13,
                adjustment: 0,
                averagePerAcre: 0.5054848616440345,
                method: null,
                totalAcres: 132.8031858,
                unadjusted: 67.13,
              },
              '2019': {
                adjusted: 67.13,
                adjustment: 0,
                averagePerAcre: 0.5054848616440345,
                method: null,
                totalAcres: 132.8031858,
                unadjusted: 67.13,
              },
            },
            {
              '2015': {
                adjusted: 345.32,
                adjustment: 0,
                averagePerAcre: 1.2268486593266654,
                method: null,
                totalAcres: 281.4691098,
                unadjusted: 345.32,
              },
              '2016': {
                adjusted: 333.26045454545454,
                adjustment: -4.139545454545455,
                averagePerAcre: 1.184003654192303,
                method: null,
                totalAcres: 281.4691098,
                unadjusted: 337.4,
              },
              '2017': {
                adjusted: 345.32,
                adjustment: 0,
                averagePerAcre: 1.2268486593266654,
                method: null,
                totalAcres: 281.4691098,
                unadjusted: 345.32,
              },
              '2018': {
                adjusted: 345.32,
                adjustment: 0,
                averagePerAcre: 1.2268486593266654,
                method: null,
                totalAcres: 281.4691098,
                unadjusted: 345.32,
              },
              '2019': {
                adjusted: 345.32,
                adjustment: 0,
                averagePerAcre: 1.2268486593266654,
                method: null,
                totalAcres: 281.4691098,
                unadjusted: 345.32,
              },
            },
            {
              '2016': {
                adjusted: 37.750454545454545,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.8337810249991937,
                method: null,
                totalAcres: 45.27622171,
                unadjusted: 41.89,
              },
              '2017': {
                adjusted: 42.97,
                adjustment: 0,
                averagePerAcre: 0.9490632914386795,
                method: null,
                totalAcres: 45.27622171,
                unadjusted: 42.97,
              },
              '2018': {
                adjusted: 42.43,
                adjustment: 0,
                averagePerAcre: 0.9371365011808976,
                method: null,
                totalAcres: 45.27622171,
                unadjusted: 42.43,
              },
              '2019': {
                adjusted: 42.97,
                adjustment: 0,
                averagePerAcre: 0.9490632914386795,
                method: null,
                totalAcres: 45.27622171,
                unadjusted: 42.97,
              },
            },
            {
              '2015': {
                adjusted: 19.62,
                adjustment: 0,
                averagePerAcre: 0.8182258536095761,
                method: null,
                totalAcres: 23.97870944,
                unadjusted: 19.62,
              },
              '2016': {
                adjusted: 15.420454545454545,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.6430894283130587,
                method: null,
                totalAcres: 23.97870944,
                unadjusted: 19.56,
              },
              '2017': {
                adjusted: 7.7,
                adjustment: 0,
                averagePerAcre: 0.3211181994288346,
                method: null,
                totalAcres: 23.97870944,
                unadjusted: 7.7,
              },
              '2018': {
                adjusted: 25.75,
                adjustment: 0,
                averagePerAcre: 1.0738693032847393,
                method: null,
                totalAcres: 23.97870944,
                unadjusted: 25.75,
              },
              '2019': {
                adjusted: 25.75,
                adjustment: 0,
                averagePerAcre: 1.0738693032847393,
                method: null,
                totalAcres: 23.97870944,
                unadjusted: 25.75,
              },
            },
            {
              '2015': {
                adjusted: 204.32,
                adjustment: 0,
                averagePerAcre: 1.1604516237359788,
                method: null,
                totalAcres: 176.0693818,
                unadjusted: 204.32,
              },
              '2016': {
                adjusted: 172.81045454545455,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.9814906645253784,
                method: null,
                totalAcres: 176.0693818,
                unadjusted: 176.95,
              },
              '2017': {
                adjusted: 204.32,
                adjustment: 0,
                averagePerAcre: 1.1604516237359788,
                method: null,
                totalAcres: 176.0693818,
                unadjusted: 204.32,
              },
              '2018': {
                adjusted: 204.32,
                adjustment: 0,
                averagePerAcre: 1.1604516237359788,
                method: null,
                totalAcres: 176.0693818,
                unadjusted: 204.32,
              },
              '2019': {
                adjusted: 204.32,
                adjustment: 0,
                averagePerAcre: 1.1604516237359788,
                method: null,
                totalAcres: 176.0693818,
                unadjusted: 204.32,
              },
            },
            {
              '2016': {
                adjusted: 11.630454545454546,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.1605882455915774,
                method: null,
                totalAcres: 72.42407128,
                unadjusted: 15.77,
              },
              '2017': {
                adjusted: 28.96,
                adjustment: 0,
                averagePerAcre: 0.39986705370424735,
                method: null,
                totalAcres: 72.42407128,
                unadjusted: 28.96,
              },
              '2018': {
                adjusted: 28.96,
                adjustment: 0,
                averagePerAcre: 0.39986705370424735,
                method: null,
                totalAcres: 72.42407128,
                unadjusted: 28.96,
              },
              '2019': {
                adjusted: 28.96,
                adjustment: 0,
                averagePerAcre: 0.39986705370424735,
                method: null,
                totalAcres: 72.42407128,
                unadjusted: 28.96,
              },
            },
            {
              '2015': {
                adjusted: 96.32,
                adjustment: 0,
                averagePerAcre: 0.7152517311054156,
                method: null,
                totalAcres: 134.6658747,
                unadjusted: 96.32,
              },
              '2016': {
                adjusted: 51.280454545454546,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.38079769399407126,
                method: null,
                totalAcres: 134.6658747,
                unadjusted: 55.42,
              },
              '2017': {
                adjusted: 96.32,
                adjustment: 0,
                averagePerAcre: 0.7152517311054156,
                method: null,
                totalAcres: 134.6658747,
                unadjusted: 96.32,
              },
              '2018': {
                adjusted: 31.34,
                adjustment: 0,
                averagePerAcre: 0.23272414091407523,
                method: null,
                totalAcres: 134.6658747,
                unadjusted: 31.34,
              },
              '2019': {
                adjusted: 96.32,
                adjustment: 0,
                averagePerAcre: 0.7152517311054156,
                method: null,
                totalAcres: 134.6658747,
                unadjusted: 96.32,
              },
            },
            {
              '2015': {
                adjusted: 144.6,
                adjustment: 0,
                averagePerAcre: 1.0504448306956078,
                method: null,
                totalAcres: 137.655968,
                unadjusted: 144.6,
              },
              '2016': {
                adjusted: 197.16045454545454,
                adjustment: -4.139545454545455,
                averagePerAcre: 1.4322695732701871,
                method: null,
                totalAcres: 137.655968,
                unadjusted: 201.3,
              },
              '2017': {
                adjusted: 202.05,
                adjustment: 0,
                averagePerAcre: 1.4677896130155432,
                method: null,
                totalAcres: 137.655968,
                unadjusted: 202.05,
              },
              '2018': {
                adjusted: 202.05,
                adjustment: 0,
                averagePerAcre: 1.4677896130155432,
                method: null,
                totalAcres: 137.655968,
                unadjusted: 202.05,
              },
              '2019': {
                adjusted: 202.05,
                adjustment: 0,
                averagePerAcre: 1.4677896130155432,
                method: null,
                totalAcres: 137.655968,
                unadjusted: 202.05,
              },
            },
            {
              '2015': {
                adjusted: 28.75,
                adjustment: 0,
                averagePerAcre: 0.33913135124296645,
                method: null,
                totalAcres: 84.77541193,
                unadjusted: 28.75,
              },
              '2016': {
                adjusted: 1.160454545454545,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.013688574541079732,
                method: null,
                totalAcres: 84.77541193,
                unadjusted: 5.3,
              },
              '2017': {
                adjusted: 75.96,
                adjustment: 0,
                averagePerAcre: 0.8960145196666341,
                method: null,
                totalAcres: 84.77541193,
                unadjusted: 75.96,
              },
              '2018': {
                adjusted: 75.96,
                adjustment: 0,
                averagePerAcre: 0.8960145196666341,
                method: null,
                totalAcres: 84.77541193,
                unadjusted: 75.96,
              },
              '2019': {
                adjusted: 75.96,
                adjustment: 0,
                averagePerAcre: 0.8960145196666341,
                method: null,
                totalAcres: 84.77541193,
                unadjusted: 75.96,
              },
            },
            {
              '2015': {
                adjusted: 80.3,
                adjustment: 0,
                averagePerAcre: 1.0566886468050993,
                method: null,
                totalAcres: 75.99211011,
                unadjusted: 80.3,
              },
              '2016': {
                adjusted: 70.02045454545454,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.9214174266788832,
                method: null,
                totalAcres: 75.99211011,
                unadjusted: 74.16,
              },
              '2017': {
                adjusted: 80.3,
                adjustment: 0,
                averagePerAcre: 1.0566886468050993,
                method: null,
                totalAcres: 75.99211011,
                unadjusted: 80.3,
              },
              '2018': {
                adjusted: 80.3,
                adjustment: 0,
                averagePerAcre: 1.0566886468050993,
                method: null,
                totalAcres: 75.99211011,
                unadjusted: 80.3,
              },
              '2019': {
                adjusted: 72.04,
                adjustment: 0,
                averagePerAcre: 0.9479931521275137,
                method: null,
                totalAcres: 75.99211011,
                unadjusted: 72.04,
              },
            },
            {
              '2015': {
                adjusted: 17.64,
                adjustment: 0,
                averagePerAcre: 1.0216080332486712,
                method: null,
                totalAcres: 17.26689633,
                unadjusted: 17.64,
              },
              '2016': {
                adjusted: 16.260454545454547,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.941712641038052,
                method: null,
                totalAcres: 17.26689633,
                unadjusted: 20.4,
              },
              '2017': {
                adjusted: 20.4,
                adjustment: 0,
                averagePerAcre: 1.1814514670222729,
                method: null,
                totalAcres: 17.26689633,
                unadjusted: 20.4,
              },
              '2018': {
                adjusted: 20.4,
                adjustment: 0,
                averagePerAcre: 1.1814514670222729,
                method: null,
                totalAcres: 17.26689633,
                unadjusted: 20.4,
              },
              '2019': {
                adjusted: 4.34,
                adjustment: 0,
                averagePerAcre: 0.2513480081802286,
                method: null,
                totalAcres: 17.26689633,
                unadjusted: 4.34,
              },
            },
            {
              '2016': {
                adjusted: 4.810454545454545,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.07445145191011768,
                method: null,
                totalAcres: 64.6119642,
                unadjusted: 8.95,
              },
              '2017': {
                adjusted: 26.67,
                adjustment: 0,
                averagePerAcre: 0.41277185007788386,
                method: null,
                totalAcres: 64.6119642,
                unadjusted: 26.67,
              },
              '2018': {
                adjusted: 26.67,
                adjustment: 0,
                averagePerAcre: 0.41277185007788386,
                method: null,
                totalAcres: 64.6119642,
                unadjusted: 26.67,
              },
              '2019': {
                adjusted: 26.67,
                adjustment: 0,
                averagePerAcre: 0.41277185007788386,
                method: null,
                totalAcres: 64.6119642,
                unadjusted: 26.67,
              },
            },
            {
              '2016': {
                adjusted: 47.17045454545455,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.666129114719073,
                method: null,
                totalAcres: 70.81278014,
                unadjusted: 51.31,
              },
              '2017': {
                adjusted: 63.43,
                adjustment: 0,
                averagePerAcre: 0.8957422639613369,
                method: null,
                totalAcres: 70.81278014,
                unadjusted: 63.43,
              },
              '2018': {
                adjusted: 41.83,
                adjustment: 0,
                averagePerAcre: 0.5907125792448797,
                method: null,
                totalAcres: 70.81278014,
                unadjusted: 41.83,
              },
              '2019': {
                adjusted: 63.43,
                adjustment: 0,
                averagePerAcre: 0.8957422639613369,
                method: null,
                totalAcres: 70.81278014,
                unadjusted: 63.43,
              },
            },
            {
              '2015': {
                adjusted: 346.54,
                adjustment: 0,
                averagePerAcre: 1.1132791037115162,
                method: null,
                totalAcres: 311.2786352,
                unadjusted: 346.54,
              },
              '2016': {
                adjusted: 342.4004545454545,
                adjustment: -4.139545454545455,
                averagePerAcre: 1.099980582751715,
                method: null,
                totalAcres: 311.2786352,
                unadjusted: 346.54,
              },
              '2017': {
                adjusted: 346.54,
                adjustment: 0,
                averagePerAcre: 1.1132791037115162,
                method: null,
                totalAcres: 311.2786352,
                unadjusted: 346.54,
              },
              '2018': {
                adjusted: 346.54,
                adjustment: 0,
                averagePerAcre: 1.1132791037115162,
                method: null,
                totalAcres: 311.2786352,
                unadjusted: 346.54,
              },
              '2019': {
                adjusted: 346.54,
                adjustment: 0,
                averagePerAcre: 1.1132791037115162,
                method: null,
                totalAcres: 311.2786352,
                unadjusted: 346.54,
              },
            },
            {
              '2015': {
                adjusted: 45.09,
                adjustment: 0,
                averagePerAcre: 0.8352200442888015,
                method: null,
                totalAcres: 53.98577334,
                unadjusted: 45.09,
              },
              '2016': {
                adjusted: 30.500454545454545,
                adjustment: -4.139545454545455,
                averagePerAcre: 0.5649720779836577,
                method: null,
                totalAcres: 53.98577334,
                unadjusted: 34.64,
              },
              '2017': {
                adjusted: 29.21,
                adjustment: 0,
                averagePerAcre: 0.5410684740225303,
                method: null,
                totalAcres: 53.98577334,
                unadjusted: 29.21,
              },
              '2018': {
                adjusted: 45.09,
                adjustment: 0,
                averagePerAcre: 0.8352200442888015,
                method: null,
                totalAcres: 53.98577334,
                unadjusted: 45.09,
              },
              '2019': {
                adjusted: 20.79,
                adjustment: 0,
                averagePerAcre: 0.3851014575463336,
                method: null,
                totalAcres: 53.98577334,
                unadjusted: 20.79,
              },
            },
            {
              '2017': {
                adjusted: 22.33,
                adjustment: 0,
                averagePerAcre: 0.49065694214871464,
                method: null,
                totalAcres: 45.51041284,
                unadjusted: 22.33,
              },
              '2018': {
                adjusted: 39.26,
                adjustment: 0,
                averagePerAcre: 0.8626597200518825,
                method: null,
                totalAcres: 45.51041284,
                unadjusted: 39.26,
              },
              '2019': {
                adjusted: 41.95,
                adjustment: 0,
                averagePerAcre: 0.9217670722408678,
                method: null,
                totalAcres: 45.51041284,
                unadjusted: 41.95,
              },
            },
          ],
        }
      );
    });
  });
  describe('Misc. adjustment tests', () => {
    it('should adjust quantification correctly #1', () => {
      expect(
        getAdjustedGrandfatheredTonnesPerYear({
          unadjustedGrandfatheredTonnesPerYearForProject: [
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 50,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: -50,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
          ],
        })
      ).toStrictEqual<ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>>(
        {
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 50,
                adjustment: 0,
                adjusted: 50,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: -50,
                adjustment: 50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
          ],
        }
      );
    });
    it('should adjust quantification correctly #2', () => {
      expect(
        getAdjustedGrandfatheredTonnesPerYear({
          unadjustedGrandfatheredTonnesPerYearForProject: [
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: -50,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 50,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
          ],
        })
      ).toStrictEqual<ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>>(
        {
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: -50,
                adjustment: 50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 50,
                adjustment: -50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
          ],
        }
      );
    });
    it('should adjust quantification correctly #3', () => {
      expect(
        getAdjustedGrandfatheredTonnesPerYear({
          unadjustedGrandfatheredTonnesPerYearForProject: [
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: -50,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
          ],
        })
      ).toStrictEqual<ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>>(
        {
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: -50,
                adjustment: 50,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -25,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -25,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
          ],
        }
      );
    });
    it('should adjust quantification correctly #4', () => {
      expect(
        getAdjustedGrandfatheredTonnesPerYear({
          unadjustedGrandfatheredTonnesPerYearForProject: [
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: -60,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
          ],
        })
      ).toStrictEqual<ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>>(
        {
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: -60,
                adjustment: 60,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -20,
                adjusted: 5,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -20,
                adjusted: 5,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -20,
                adjusted: 5,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
            },
          ],
        }
      );
    });
    it('should adjust quantification correctly #5', () => {
      expect(
        getAdjustedGrandfatheredTonnesPerYear({
          unadjustedGrandfatheredTonnesPerYearForProject: [
            {
              '2015': {
                amount: 10,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: -10,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 10,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: -11,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: -60,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 10,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 10,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 5,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2016': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2017': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2018': {
                amount: 0,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
              '2019': {
                amount: 25,
                method: null,
                averagePerAcre: null,
                totalAcres: null,
              },
            },
          ],
        })
      ).toStrictEqual<ReturnType<typeof getAdjustedGrandfatheredTonnesPerYear>>(
        {
          adjustedGrandfatheredTonnesPerYear: [
            {
              '2015': {
                unadjusted: 10,
                adjustment: 0,
                adjusted: 10,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: -10,
                adjustment: 10,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 10,
                adjustment: 0,
                adjusted: 10,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: -11,
                adjustment: 11,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: -60,
                adjustment: 60,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 10,
                adjustment: 0,
                adjusted: 10,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 10,
                adjustment: -10,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 5,
                adjustment: -5,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -22,
                adjusted: 3,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -22,
                adjusted: 3,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
            },
            {
              '2015': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2016': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2017': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2018': {
                unadjusted: 0,
                adjustment: 0,
                adjusted: 0,
                averagePerAcre: 0,
                method: null,
                totalAcres: null,
              },
              '2019': {
                unadjusted: 25,
                adjustment: -22,
                adjusted: 3,
                averagePerAcre: Infinity,
                method: null,
                totalAcres: null,
              },
            },
          ],
        }
      );
    });
    it('should adjust quantification correctly #6', () => {});
  });
});

describe('getQuantificationSummary', () => {
  it('will get the tonnes that are grandfatherable given a COMET output file', async () => {
    expect(
      await getQuantificationSummary({ xmlData: GRANDFATHERABLE_YEARS_OUTPUT })
    ).toStrictEqual<ResolvedReturnType<typeof getQuantificationSummary>>({
      methodologyVersion: METHODOLOGY_VERSION,
      switchYear: 2016,
      grandfatherableYears: [2016, 2017, 2018, 2019, 2020],
      numberOfGrandfatheredYears: 5,
      modeledYears: [
        2015,
        2016,
        2017,
        2018,
        2019,
        2020,
        2021,
        2022,
        2023,
        2024,
      ],
      totalAcres: 119.00674210689633,
      totalM2: 481603.1986041848,
      tenYearProjectedTonnesPerYearPerAcre: 1.3492473884863634,
      tenYearProjectedTonnesTotalEstimate: 1605.69536,
      tenYearProjectedBaselineTonnesPerYear: 15.897614,
      tenYearProjectedFutureTonnesPerYear: 176.46715,
      tenYearProjectedTonnesPerYear: 160.569536,
      tenYearProjectedFutureTonnesPerYearPerAcre: 1.4828332149576078,
      tenYearProjectedBaselineTonnesPerYearPerAcre: 0.1335858264712445,
      somscAnnualDifferencesBetweenFutureAndBaselineScenariosPerPolygon: [
        {
          '2015': 120.88957366558826,
          '2016': 43.28736522204999,
          '2017': 105.228401624067,
          '2018': 129.19400878679176,
          '2019': 97.87182257764748,
          '2020': 168.92058104294398,
          '2021': 272.1879037705469,
          '2022': 92.38950808272901,
          '2023': 270.0208473579143,
          '2024': 149.65168144606594,
        },
      ],
      somscAnnualDifferencesBetweenFutureAndBaselineScenarios: {
        '2016': 43.28736522204999,
        '2017': 105.228401624067,
        '2018': 129.19400878679176,
        '2019': 97.87182257764748,
        '2020': 168.92058104294398,
      },
      somscAnnualDifferencesBetweenFutureAndBaselineScenariosAverage: 108.90043585070003,
      unadjustedGrandfatheredTonnesPerYear: {
        '2016': {
          amount: 43.28736522204999,
          method: 'somsc',
          averagePerAcre: 0.3637387634993625,
          totalAcres: 119.00674210689633,
        },
        '2017': {
          amount: 105.228401624067,
          method: 'somsc',
          averagePerAcre: 0.8842221857442908,
          totalAcres: 119.00674210689633,
        },
        '2018': {
          amount: 129.19400878679176,
          method: 'somsc',
          averagePerAcre: 1.0856024331020242,
          totalAcres: 119.00674210689633,
        },
        '2019': {
          amount: 97.87182257764748,
          method: 'somsc',
          averagePerAcre: 0.8224056960548952,
          totalAcres: 119.00674210689633,
        },
        '2020': {
          amount: 160.569536,
          averagePerAcre: 1.3492473884863634,
          method: 'projection',
          totalAcres: 119.00674210689633,
        },
      },
      grandfatheredTonnes: 536.1511342105563,
      grandfatheredTonnesPerYearPerAcreAverage: 0.9010432933773872,
    });
  });
  describe('When there are no grandfatherable years', () => {
    it('will still return quantification for given a COMET output file', async () => {
      expect(
        await getQuantificationSummary({
          xmlData: NO_GRANDFATHERABLE_YEARS_OUTPUT,
        })
      ).toStrictEqual<ResolvedReturnType<typeof getQuantificationSummary>>({
        methodologyVersion: METHODOLOGY_VERSION,
        grandfatherableYears: [],
        modeledYears: [2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029],
        grandfatheredTonnesPerYearPerAcreAverage: 0,
        somscAnnualDifferencesBetweenFutureAndBaselineScenariosPerPolygon: [
          {
            '2021': 110.31224591631478,
            '2022': 142.58104451079697,
            '2023': 156.51798030947353,
            '2024': 109.8857066929519,
            '2025': 82.18179830054937,
            '2026': -46.028488914474,
            '2027': 14.158012159157224,
            '2028': 43.983702687399756,
            '2029': 57.5085630169718,
          },
        ],
        somscAnnualDifferencesBetweenFutureAndBaselineScenarios: {},
        totalAcres: 119.00075350355577,
        totalM2: 481578.9635862949,
        grandfatheredTonnes: 0,
        numberOfGrandfatheredYears: 0,
        somscAnnualDifferencesBetweenFutureAndBaselineScenariosAverage: 0,
        switchYear: 2021,
        tenYearProjectedBaselineTonnesPerYear: 69.252106,
        tenYearProjectedBaselineTonnesPerYearPerAcre: 0.5819467857229218,
        tenYearProjectedFutureTonnesPerYear: 155.67767,
        tenYearProjectedFutureTonnesPerYearPerAcre: 1.3082074307651197,
        tenYearProjectedTonnesPerYear: 86.425564,
        tenYearProjectedTonnesPerYearPerAcre: 0.7262606450421979,
        tenYearProjectedTonnesTotalEstimate: 777.830076,
        unadjustedGrandfatheredTonnesPerYear: {},
      });
    });
  });
  it('should quantify multi-polygon output files', async () => {
    expect(
      await getQuantificationSummary({
        xmlData: MULTIPOLYGON_OUTPUT,
      })
    ).toStrictEqual<ResolvedReturnType<typeof getQuantificationSummary>>({
      methodologyVersion: METHODOLOGY_VERSION,
      tenYearProjectedTonnesPerYearPerAcre: 1.1533581913018405,
      tenYearProjectedTonnesTotalEstimate: 1672.448691,
      grandfatherableYears: [2016, 2017, 2018, 2019, 2020],
      modeledYears: [
        2015,
        2016,
        2017,
        2018,
        2019,
        2020,
        2021,
        2022,
        2023,
        2024,
      ],
      somscAnnualDifferencesBetweenFutureAndBaselineScenariosPerPolygon: [
        {
          '2015': 13.268194830596787,
          '2016': 7.478908262178777,
          '2017': 18.44880961039429,
          '2018': 23.295611123448456,
          '2019': 20.553943742745066,
          '2020': 20.70432300088026,
          '2021': 43.66344963093679,
          '2022': 16.707221931863394,
          '2023': 44.16069820818342,
          '2024': 30.6840811421353,
        },
        {
          '2015': 60.90014578515644,
          '2016': 34.35279847468213,
          '2017': 85.76966639711026,
          '2018': 107.29346186569582,
          '2019': 94.99046450397587,
          '2020': 97.48785290689473,
          '2021': 202.4611476448192,
          '2022': 77.21154156458417,
          '2023': 204.14385209004348,
          '2024': 140.37850822960675,
        },
      ],
      somscAnnualDifferencesBetweenFutureAndBaselineScenarios: {
        '2016': 41.83170673686091,
        '2017': 104.21847600750455,
        '2018': 130.58907298914428,
        '2019': 115.54440824672093,
        '2020': 118.192175907775,
      },
      tenYearProjectedBaselineTonnesPerYear: 2.3572619,
      grandfatheredTonnesPerYearPerAcreAverage: 0.7039332910421561,
      tenYearProjectedFutureTonnesPerYear: 169.602131,
      grandfatheredTonnes: 510.3758398880057,
      numberOfGrandfatheredYears: 5,
      somscAnnualDifferencesBetweenFutureAndBaselineScenariosAverage: 102.07516797760114,
      switchYear: 2016,
      tenYearProjectedTonnesPerYear: 167.2448691,
      totalAcres: 145.00687675458755,
      totalM2: 586822.0104864568,
      tenYearProjectedFutureTonnesPerYearPerAcre: 1.1696143989573538,
      tenYearProjectedBaselineTonnesPerYearPerAcre: 0.0162562076555133,
      unadjustedGrandfatheredTonnesPerYear: {
        '2016': {
          amount: 41.83170673686091,
          method: 'somsc',
          averagePerAcre: 0.2884808477577081,
          totalAcres: 145.00687675458755,
        },
        '2017': {
          amount: 104.21847600750455,
          method: 'somsc',
          averagePerAcre: 0.7187140247416398,
          totalAcres: 145.00687675458755,
        },
        '2018': {
          amount: 130.58907298914428,
          method: 'somsc',
          averagePerAcre: 0.9005715860645407,
          totalAcres: 145.00687675458755,
        },
        '2019': {
          amount: 115.54440824672093,
          method: 'somsc',
          averagePerAcre: 0.7968201979984062,
          totalAcres: 145.00687675458755,
        },
        '2020': {
          amount: 118.192175907775,
          averagePerAcre: 0.8150797986484857,
          method: 'somsc',
          totalAcres: 145.00687675458755,
        },
      },
    });
  });
});
